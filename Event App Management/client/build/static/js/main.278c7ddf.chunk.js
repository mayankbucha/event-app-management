(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{17:function(e,t,n){},31:function(e,t,n){},32:function(e,t,n){},33:function(e,t,n){},40:function(e,t,n){},41:function(e,t,n){},43:function(e,t,n){},44:function(e,t,n){},45:function(e,t,n){"use strict";n.r(t);var a=n(1),s=n.n(a),i=n(25),c=n.n(i),r=(n(31),n(10)),o=n(11),l=n(13),u=n(12),d=n(23),h=n(2),j=(n(32),n(9)),b=n.p+"static/media/logo.9b566387.png",m=(n(33),n(0)),p=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){return Object(r.a)(this,n),t.call(this,e)}return Object(o.a)(n,[{key:"render",value:function(){return Object(m.jsxs)("nav",{className:"Navigation",children:[Object(m.jsxs)(j.b,{to:"/",className:"logo",children:[Object(m.jsx)("img",{src:b,alt:"alt"}),Object(m.jsx)("p",{children:"EVENT-M"})]}),Object(m.jsxs)("ul",{children:[!this.props.isLoggedIn&&Object(m.jsx)(j.b,{to:"/register",className:"links",children:"Register"}),!this.props.isLoggedIn&&Object(m.jsx)(j.b,{to:"/login",className:"links",children:"Login"}),this.props.isLoggedIn&&Object(m.jsx)(j.b,{to:"/create",className:"links",children:"Create"}),this.props.isLoggedIn&&Object(m.jsx)(j.b,{to:"/profile",className:"links",children:"Profile"}),this.props.isLoggedIn&&Object(m.jsx)(j.b,{to:"/logout",className:"links",children:"Logout"})]})]})}}]),n}(s.a.Component),g=n(3),O=(n(40),n(41),n(16)),f=n.n(O),v=n(22),x={get:function(){var e=Object(v.a)(f.a.mark((function e(t){var n,a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("http://localhost:4000/event?limit=".concat(t));case 2:return n=e.sent,e.next=5,n.json();case 5:return a=e.sent,e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),create:function(e){return fetch("http://localhost:4000/event/create",{method:"POST",body:JSON.stringify(e),headers:{"Content-type":"application/json"},credentials:"include"}).then((function(e){return e.json()}))},edit:function(e,t){return fetch("http://localhost:4000/event/edit/"+e,{method:"PUT",body:JSON.stringify(t),headers:{"Content-type":"application/json"},credentials:"include"}).then((function(e){return e.json()}))},delete:function(e){return fetch("http://localhost:4000/event/delete/"+e,{method:"DELETE",credentials:"include"}).then((function(e){return e.json()}))},like:function(e){return fetch("http://localhost:4000/event/like/"+e,{method:"PUT",headers:{"Content-type":"application/json"},credentials:"include"}).then((function(e){return e.json()}))},dislike:function(e){return fetch("http://localhost:4000/event/dislike/"+e,{method:"PUT",headers:{"Content-type":"application/json"},credentials:"include"}).then((function(e){return e.json()}))},details:function(){var e=Object(v.a)(f.a.mark((function e(t){var n,a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("http://localhost:4000/event/details/".concat(t),{method:"GET",headers:{"Content-type":"application/json"},credentials:"include"});case 2:return n=e.sent,e.next=5,n.json();case 5:return a=e.sent,e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},N=!!function(){return document.cookie.split("; ").reduce((function(e,t){var n=t.split("="),a=Object(g.a)(n,2),s=a[0],i=a[1];return e[s]=i,e}),{})}()["x-auth-token"],C=function(e){var t=e.event,n=e.isAdmin,s=e.isLiked,i=e.isLoggedIn,c=Object(a.useState)(s),r=Object(g.a)(c,2),o=r[0],l=r[1],u=Object(h.f)();return Object(m.jsxs)("div",{className:"Event",children:[i?Object(m.jsx)("img",{src:t.imageURL,alt:"alt",className:"details",onClick:function(e){var t=e.currentTarget.id;x.details(t).then((function(){u.push("/details/"+t)})).catch((function(e){return console.log(e)}))},id:t._id}):Object(m.jsx)("img",{src:t.imageURL,alt:"alt",id:t._id}),Object(m.jsx)("p",{className:"name",children:t.name}),Object(m.jsx)("p",{className:"description",children:t.description}),t.admin.firstName?Object(m.jsxs)("div",{className:"creator",children:[Object(m.jsx)("span",{children:"Creator: "}),t.admin.firstName+" "+t.admin.lastName]}):null,n?Object(m.jsxs)("div",{className:"buttons",children:[Object(m.jsx)("button",{className:"links",id:t._id,onClick:function(e){var t=e.currentTarget.id;u.push("/edit/"+t)},children:"Edit"}),Object(m.jsx)("button",{className:"links",id:t._id,onClick:function(e){var t=e.currentTarget.id;x.delete(t).then((function(){u.push("/")})).catch((function(e){return console.log(e)}))},children:"Delete"})]}):Object(m.jsx)("div",{children:t.admin.firstName?Object(m.jsxs)("div",{className:"likes",children:[o?Object(m.jsx)("i",{className:"far fa-thumbs-up blue",id:t._id,onClick:function(e){var t=e.currentTarget.id;x.dislike(t).then((function(){u.push("/"),l(!1)})).catch((function(e){return console.log(e)}))}}):Object(m.jsx)("i",{className:"far fa-thumbs-up",id:t._id,onClick:function(e){var t=e.currentTarget.id;x.like(t).then((function(){u.push("/"),l(!0)})).catch((function(e){return console.log(e)}))}}),Object(m.jsxs)("span",{children:[" ",t.likes.length+(1===t.likes.length?" Like":" Likes")]})]}):null})]},t._id)},k=function(e){var t=JSON.parse(sessionStorage.getItem("user"))._id;return e.admin._id===t},S=function(e){var t=JSON.parse(sessionStorage.getItem("user"))._id;return e.likes.includes(t)},y=function(e){var t=e.isLoggedIn,n=Object(a.useState)([]),s=Object(g.a)(n,2),i=s[0],c=s[1];Object(a.useEffect)((function(){t?x.get().then((function(e){c(e)})):x.get(3).then((function(e){c(e)}))}));return Object(m.jsxs)("div",{className:"Home",children:[t?Object(m.jsx)("h1",{children:"ALL EVENTS"}):Object(m.jsx)("h1",{children:"SOME OF THE LATEST EVENTS"}),Object(m.jsx)("div",{className:"Events",children:t?i.map((function(e){return Object(m.jsx)(C,{isAdmin:k(e),isLiked:S(e),event:e,isLoggedIn:!0},e._id)})):i.map((function(e){return Object(m.jsx)(C,{isAdmin:!1,isLiked:!1,event:e,isLoggedIn:!1},e._id)}))})]})},L=n(4),w=(n(17),function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(r.a)(this,n),(a=t.call(this,e)).state={firstName:"",lastName:"",username:"",password:"",rePassword:""},a.onChangeFirstName=a.onChangeFirstName.bind(Object(L.a)(a)),a.onChangeLastName=a.onChangeLastName.bind(Object(L.a)(a)),a.onChangeUsername=a.onChangeUsername.bind(Object(L.a)(a)),a.onChangePassword=a.onChangePassword.bind(Object(L.a)(a)),a.onChangeRePassword=a.onChangeRePassword.bind(Object(L.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(L.a)(a)),a}return Object(o.a)(n,[{key:"onChangeFirstName",value:function(e){this.setState({firstName:e.target.value})}},{key:"onChangeLastName",value:function(e){this.setState({lastName:e.target.value})}},{key:"onChangeUsername",value:function(e){this.setState({username:e.target.value})}},{key:"onChangePassword",value:function(e){this.setState({password:e.target.value})}},{key:"onChangeRePassword",value:function(e){this.setState({rePassword:e.target.value})}},{key:"handleSubmit",value:function(e){e.preventDefault();var t=this.state,n=t.firstName,a=t.lastName,s=t.username,i=t.password;t.rePassword;this.props.register({firstName:n,lastName:a,username:s,password:i},this.props.history)}},{key:"render",value:function(){var e=this.state,t=e.firstName,n=e.lastName,a=e.username,s=e.password,i=e.rePassword;return Object(m.jsxs)("form",{className:"Register",onSubmit:this.handleSubmit,children:[Object(m.jsx)("p",{className:"title",children:"Sign In"}),Object(m.jsx)("div",{className:"input",children:Object(m.jsx)("input",{type:"text",name:"firstName",placeholder:"First Name",onChange:this.onChangeFirstName,value:t})}),Object(m.jsx)("div",{className:"input",children:Object(m.jsx)("input",{type:"text",name:"lastName",placeholder:"Last Name",onChange:this.onChangeLastName,value:n})}),Object(m.jsx)("div",{className:"input",children:Object(m.jsx)("input",{type:"text",name:"username",placeholder:"Username",onChange:this.onChangeUsername,value:a})}),Object(m.jsx)("div",{className:"input",children:Object(m.jsx)("input",{type:"password",name:"password",placeholder:"Password",onChange:this.onChangePassword,value:s})}),Object(m.jsx)("div",{className:"input",children:Object(m.jsx)("input",{type:"password",name:"rePassword",placeholder:"Repeat Password",onChange:this.onChangeRePassword,value:i})}),Object(m.jsx)("button",{type:"submit",className:"btn",children:"SIGN IN"})]})}}]),n}(s.a.Component)),E=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(r.a)(this,n),(a=t.call(this,e)).state={username:"",password:""},a.onChangeUsername=a.onChangeUsername.bind(Object(L.a)(a)),a.onChangePassword=a.onChangePassword.bind(Object(L.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(L.a)(a)),a}return Object(o.a)(n,[{key:"onChangeUsername",value:function(e){this.setState({username:e.target.value})}},{key:"onChangePassword",value:function(e){this.setState({password:e.target.value})}},{key:"handleSubmit",value:function(e){e.preventDefault();var t=this.state,n=t.username,a=t.password;this.props.login({username:n,password:a},this.props.history)}},{key:"render",value:function(){var e=this.state,t=e.username,n=e.password;return Object(m.jsxs)("form",{className:"Login",onSubmit:this.handleSubmit,children:[Object(m.jsx)("h2",{className:"title",children:"Sign Up"}),Object(m.jsx)("div",{className:"input",children:Object(m.jsx)("input",{type:"text",name:"username",placeholder:"Username",onChange:this.onChangeUsername,value:t})}),Object(m.jsx)("div",{className:"input",children:Object(m.jsx)("input",{type:"password",name:"password",placeholder:"Password",onChange:this.onChangePassword,value:n})}),Object(m.jsx)("button",{type:"submit",className:"btn",children:"SIGN UP"})]})}}]),n}(s.a.Component),U={get:function(e){return fetch("http://localhost:4000/user/"+e,{method:"GET",credentials:"include"}).then((function(e){return e.json()}))},register:function(e){return fetch("http://localhost:4000/user/register",{method:"POST",body:JSON.stringify(e),headers:{"Content-type":"application/json"},credentials:"include"}).then((function(e){return e.json()})).then((function(e){return sessionStorage.setItem("user",JSON.stringify(e))}))},login:function(e){return fetch("http://localhost:4000/user/login",{method:"POST",body:JSON.stringify(e),headers:{"Content-type":"application/json"},credentials:"include"}).then((function(e){return e.json()})).then((function(e){return sessionStorage.setItem("user",JSON.stringify(e))}))},logout:function(){return fetch("http://localhost:4000/user/logout",{method:"POST",credentials:"include"}).then((function(e){return e.text()})).then((function(){return sessionStorage.clear()}))}};var I=function(e){return(0,e.logout)(e.history),null},P=function(){var e=Object(a.useState)(""),t=Object(g.a)(e,2),n=t[0],s=t[1],i=Object(a.useState)(""),c=Object(g.a)(i,2),r=c[0],o=c[1],l=Object(a.useState)(""),u=Object(g.a)(l,2),d=u[0],j=u[1],b=Object(a.useState)(""),p=Object(g.a)(b,2),O=p[0],f=p[1],v=Object(a.useState)(""),N=Object(g.a)(v,2),C=N[0],k=N[1],S=Object(h.f)();return Object(m.jsxs)("form",{className:"Create",onSubmit:function(e){e.preventDefault(),x.create({name:n,description:r,location:C,date:d,imageURL:O}).then((function(){return S.push("/")})).catch((function(e){console.log(e)}))},children:[Object(m.jsx)("p",{className:"title",children:"Create your event"}),Object(m.jsx)("div",{className:"input",children:Object(m.jsx)("input",{type:"text",name:"name",placeholder:"Name",onChange:function(e){s(e.target.value)},value:n})}),Object(m.jsx)("div",{className:"input",children:Object(m.jsx)("input",{type:"text",name:"description",placeholder:"Description",onChange:function(e){o(e.target.value)},value:r})}),Object(m.jsx)("div",{className:"input",children:Object(m.jsx)("input",{type:"date",name:"date",min:"01/01/2021",max:"01/01/2030",onChange:function(e){j(e.target.value)},value:d})}),Object(m.jsx)("div",{className:"input",children:Object(m.jsx)("input",{type:"text",name:"imageURL",placeholder:"imageURL",onChange:function(e){f(e.target.value)},value:O})}),Object(m.jsx)("div",{className:"input",children:Object(m.jsx)("input",{type:"text",name:"location",placeholder:"Location",onChange:function(e){k(e.target.value)},value:C})}),Object(m.jsx)("button",{type:"submit",className:"btn",children:"CREATE"})]})},R=function(){return Object(m.jsx)("div",{children:"Not Found"})},T=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(r.a)(this,n),(a=t.call(this,e)).state={name:"",description:"",imageURL:"",date:"",location:""},a.onChangeName=a.onChangeName.bind(Object(L.a)(a)),a.onChangeDescription=a.onChangeDescription.bind(Object(L.a)(a)),a.onChangeImageURL=a.onChangeImageURL.bind(Object(L.a)(a)),a.onChangeDate=a.onChangeDate.bind(Object(L.a)(a)),a.onChangeLocation=a.onChangeLocation.bind(Object(L.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(L.a)(a)),a}return Object(o.a)(n,[{key:"onChangeName",value:function(e){this.setState({name:e.target.value})}},{key:"onChangeDescription",value:function(e){this.setState({description:e.target.value})}},{key:"onChangeImageURL",value:function(e){this.setState({imageURL:e.target.value})}},{key:"onChangeDate",value:function(e){this.setState({date:e.target.value})}},{key:"onChangeLocation",value:function(e){this.setState({location:e.target.value})}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault();var n=this.props.match.params.id.toString(),a=this.state,s=a.name,i=a.description,c=a.imageURL,r=a.location;x.edit(n,{name:s,description:i,imageURL:c,location:r}).then((function(){t.props.history.push("/")})).catch((function(e){return console.log(e)}))}},{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params.id.toString();x.get().then((function(n){n.forEach((function(n){n._id===t&&e.setState({name:n.name,description:n.description,imageURL:n.imageURL,location:n.location,date:n.date})}))})).catch((function(e){return console.log(e)}))}},{key:"render",value:function(){return Object(m.jsxs)("form",{className:"Edit",onSubmit:this.handleSubmit,children:[Object(m.jsx)("p",{className:"title",children:"Edit your event"}),Object(m.jsx)("div",{className:"input",children:Object(m.jsx)("input",{type:"text",name:"name",placeholder:"Name",onChange:this.onChangeName,value:this.state.name})}),Object(m.jsx)("div",{className:"input",children:Object(m.jsx)("input",{type:"text",name:"description",placeholder:"Description",onChange:this.onChangeDescription,value:this.state.description})}),Object(m.jsx)("div",{className:"input",children:Object(m.jsx)("input",{type:"date",name:"date",min:"01/01/2021",max:"01/01/2030",onChange:this.onChangeDate,value:this.state.date})}),Object(m.jsx)("div",{className:"input",children:Object(m.jsx)("input",{type:"text",name:"imageURL",placeholder:"imageURL",onChange:this.onChangeImageURL,value:this.state.imageURL})}),Object(m.jsx)("div",{className:"input",children:Object(m.jsx)("input",{type:"text",name:"location",placeholder:"Location",onChange:this.onChangeLocation,value:this.state.location})}),Object(m.jsx)("button",{type:"submit",className:"btn",children:"Edit"})]})}}]),n}(s.a.Component),_=(n(43),n.p+"static/media/user.45a0af68.png"),D=function(){var e=Object(a.useState)("createdEvents"),t=Object(g.a)(e,2),n=t[0],s=t[1],i=Object(a.useState)({}),c=Object(g.a)(i,2),r=c[0],o=c[1],l=Object(a.useState)([]),u=Object(g.a)(l,2),d=u[0],h=u[1],j=Object(a.useState)([]),b=Object(g.a)(j,2),p=b[0],O=b[1];Object(a.useEffect)((function(){var e=JSON.parse(sessionStorage.getItem("user"))._id;U.get(e).then((function(e){o(e),h(e.likedEvents),O(e.createdEvents)})).catch((function(e){return console.log(e)}))}),[]);var f=function(e){s("likedEvents")},v=function(e){s("createdEvents")};return Object.keys(r).length?Object(m.jsxs)("div",{className:"Profile",children:["likedEvents"===n?Object(m.jsxs)("div",{className:"likedEvents",children:[Object(m.jsx)("h1",{children:"Liked Events"}),0!==d.length?d.map((function(e){return Object(m.jsx)(C,{isAdmin:!1,isLiked:!0,event:e,display:"profile"},e._id)})):Object(m.jsx)("span",{children:"No liked events"})]}):Object(m.jsxs)("div",{className:"createdEvents",children:[Object(m.jsx)("h1",{children:"Created Events"}),0!==p.length?p.map((function(e){return Object(m.jsx)(C,{isAdmin:!0,isLiked:!1,event:e},e._id)})):Object(m.jsx)("span",{children:"No created events"})]}),Object(m.jsxs)("div",{className:"profile-data",children:[Object(m.jsx)("img",{src:_,alt:"alt"}),Object(m.jsx)("p",{className:"name",children:r.firstName.toUpperCase()+" "+r.lastName.toUpperCase()}),Object(m.jsx)("p",{className:"username",children:"@"+r.username}),Object(m.jsxs)("p",{className:"liked-events",children:["Liked events: ",r.likedEvents.length]}),Object(m.jsxs)("p",{className:"created-events",children:["Created events: ",r.createdEvents.length]}),Object(m.jsxs)("div",{className:"buttons",children:[Object(m.jsx)("button",{onClick:f,children:"Liked events"}),Object(m.jsx)("button",{onClick:v,children:"Created events"})]})]})]}):Object(m.jsx)("span",{children:"Loading..."})},J=(n(44),function(){var e=Object(a.useState)({}),t=Object(g.a)(e,2),n=t[0],s=t[1],i=Object(a.useState)(!1),c=Object(g.a)(i,2),r=c[0],o=c[1],l=Object(a.useState)(!1),u=Object(g.a)(l,2),d=u[0],j=u[1],b=Object(h.g)().id,p=Object(h.f)();Object(a.useEffect)((function(){x.details(b).then((function(e){s(e),j(k(e)),o(S(e))})).catch((function(e){return console.log(e)}))}),[]);var O=function(e){var t=e.currentTarget.id;p.push("/edit/"+t)},f=function(e){var t=e.currentTarget.id;x.delete(t).then((function(){p.push("/")})).catch((function(e){return console.log(e)})),p.push("/")},v=function(e){var t=e.currentTarget.id;x.like(t).then((function(){p.push("/details/"+t),o(!0)})).catch((function(e){return console.log(e)}))},N=function(e){var t=e.currentTarget.id;x.dislike(t).then((function(){p.push("/details/"+t),o(!1)})).catch((function(e){return console.log(e)}))};return Object.keys(n).length?Object(m.jsxs)("div",{className:"Details",children:[Object(m.jsx)("img",{src:n.imageURL,alt:"alt",id:n._id}),Object(m.jsxs)("div",{className:"question-answers",children:[Object(m.jsx)("span",{className:"question",children:"What is the name of the event?"}),Object(m.jsx)("p",{className:"name",children:n.name}),Object(m.jsx)("span",{className:"question",children:"Where will the event be held?"}),Object(m.jsx)("p",{className:"location",children:n.location}),Object(m.jsx)("span",{className:"question",children:"When will the event be held?"}),Object(m.jsx)("p",{className:"date",children:n.date}),Object(m.jsx)("span",{className:"question",children:"What is the event about?"}),Object(m.jsx)("p",{className:"description",children:n.description})]}),Object(m.jsx)("div",{className:"buttons",children:d?Object(m.jsxs)("div",{className:"buttons",children:[Object(m.jsx)("button",{className:"links",id:n._id,onClick:O,children:"Edit"}),Object(m.jsx)("button",{className:"links",id:n._id,onClick:f,children:"Delete"})]}):Object(m.jsx)("div",{className:"likes",children:r?Object(m.jsx)("i",{className:"far fa-thumbs-up blue",id:n._id,onClick:N}):Object(m.jsx)("i",{className:"far fa-thumbs-up",id:n._id,onClick:v})})})]}):Object(m.jsx)("span",{children:"Loading..."})});function A(e,t){return function(n){return Object(m.jsx)(e,Object(d.a)(Object(d.a)({},n),t))}}var F=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(r.a)(this,n),(a=t.call(this,e)).register=function(e,t){U.register(e).then((function(){a.setState({isLoggedIn:!0}),t.push("/")}))},a.logout=function(e){U.logout().then((function(){return a.setState({isLoggedIn:!1}),e.push("/"),null}))},a.login=function(e,t){U.login(e).then((function(){a.setState({isLoggedIn:!0}),t.push("/")}))},a.state={isLoggedIn:N},a}return Object(o.a)(n,[{key:"render",value:function(){var e=this.state.isLoggedIn;return Object(m.jsxs)("div",{className:"App",children:[Object(m.jsx)(p,{isLoggedIn:e,logout:this.logout}),Object(m.jsxs)(h.c,{children:[Object(m.jsx)(h.a,{path:"/",exact:!0,component:A(y,{isLoggedIn:e})}),!e&&Object(m.jsx)(h.a,{path:"/register",component:A(w,{register:this.register})}),!e&&Object(m.jsx)(h.a,{path:"/login",component:A(E,{login:this.login})}),e&&Object(m.jsx)(h.a,{path:"/logout",component:A(I,{logout:this.logout})}),e&&Object(m.jsx)(h.a,{path:"/create",component:P}),e&&Object(m.jsx)(h.a,{path:"/details/:id",component:A(J)}),e&&Object(m.jsx)(h.a,{path:"/edit/:id",component:A(T)}),e&&Object(m.jsx)(h.a,{path:"/profile",component:A(D)}),Object(m.jsx)(h.a,{path:"*",component:R})]})]})}}]),n}(s.a.Component);c.a.render(Object(m.jsx)(s.a.StrictMode,{children:Object(m.jsx)(j.a,{children:Object(m.jsx)(F,{})})}),document.getElementById("root"))}},[[45,1,2]]]);
//# sourceMappingURL=main.278c7ddf.chunk.js.map